<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 중첩함수 > 함수 안에 함수가 들어간 형태
        function f() {  //감싸고 있는 함수
            let value = 123;
            // 함수 안에 있는 함수는 호이스팅되지 않고 함수 안에서만 사용가능
            function g() {  //함수 안에 생성된 함수
                alert(value)
            }
            g(); // f함수 안에서만 호출
        }

        // 중첩함수를 실행하기 위해 감싸고 있는 함수를 호출
        f();
        // g(); //함수 안의 함수는 밖에서 호출할 수 없다


        // 중첩 함수 실습 -1
        function add(a,b) {
            let sum = a+b;
            function printNum() {
                document.write(sum);
            }
            printNum();
        }
        add(5,6);

        // 클로저 함수 - 중첩 함수의 하나로, 외부 변수에 접근하는 함수
        function count() {
            let count = 0;
            return function() {     //클로저 함수
                return count += 1;
            }
        }
        //외부로 호출하기 위한 함수 - count()함수를 한 번 호출!
        let startCount = count();

        // startCount로 클로저함수 호출
        document.write(startCount());


        // 클로저함수가 없는 함수 - 호출할 때마다 초기화
        function noCount() {
            let count=0;
            return count += 1;
        }

        // 입력받은 숫자값을 더해주는 클로저함수
        function sumClosures (){
            let sum = 0;    //변수 초기화
            return function(num) {  //클로저 함수
                return sum += num;
            }
        }
        // sumClosures함수 실행,
        // return에 넣어준 클로저함수 startSum 에 할당
        let startSum = sumClosures();
        document.write(`<p>${startSum(3)}</p>`);
        document.write(`<p>${startSum(5)}</p>`);

        // 실습 - 클로저 함수를 이용하여,
        // 넣은 값을 계속해서 곱하는 함수를 만들기
        // multiClosures() / startMulti
        // 클로저함수를 화살표함수로 작성
        function multiClosures () {
            let multi = 1;
            return num => multi *= num;
            }

            let startMulti = multiClosures();
            document.write(`<p>${startMulti(5)}</p>`);
            document.write(`<p>${startMulti(8)}</p>`);
            document.write(`<p>${startMulti(2)}</p>`);
            document.write(`<p>${startMulti(10)}</p>`);

    </script>
</body>
</html>